---
phase: 22-layout-mobile-conversion
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - C:/Users/bskim/Downloads/beamacademy-index.html
autonomous: true

must_haves:
  truths:
    - "All interactive elements meet 44x44px minimum touch target size"
    - "Sticky CTA bar hides when user scrolls near contact form (avoids redundancy)"
    - "Form inputs have proper mobile input types and 16px font-size"
    - "Color contrast ratios meet 4.5:1 for all text"
  artifacts:
    - path: "C:/Users/bskim/Downloads/beamacademy-index.html"
      provides: "Mobile optimization CSS and JS"
      contains: "contactObserver"
  key_links:
    - from: "IntersectionObserver (sticky CTA)"
      to: "contact section visibility"
      via: "class toggle"
      pattern: "contactObserver|isIntersecting"
---

<objective>
Complete mobile optimization pass: verify tap targets, enhance sticky CTA behavior, verify form inputs, and audit color contrast.

Purpose: Ensure mobile experience meets accessibility standards and UX best practices. Build on existing solid foundation.

Output: Mobile-optimized page with verified 44px tap targets, smart sticky CTA, and accessible contrast.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/22-layout-mobile-conversion/22-RESEARCH.md

Current sticky CTA: IntersectionObserver shows bar after hero scroll, has safe-area-inset-bottom support, 48px min-height buttons.

Current touch target rule covers: a, button, [role="button"], inputs, .btn, .nav-link, .nav-cta, etc.

Research identified: Sticky CTA should hide near contact form to avoid redundancy.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enhance sticky CTA to hide near contact form</name>
  <files>C:/Users/bskim/Downloads/beamacademy-index.html</files>
  <action>
Modify the IntersectionObserver JavaScript to hide the sticky CTA bar when the contact section is visible.

1. Find the existing sticky CTA IntersectionObserver code (search for "sticky-cta-bar").

2. Add a second observer for the contact section that:
   - Hides sticky bar when contact section is 30%+ visible
   - Shows sticky bar when scrolling away from contact (if past hero)
   - Uses IntersectionObserver with threshold: 0.3

3. Ensure the original hero observer logic is preserved - the sticky bar should:
   - Be hidden when at top (hero visible)
   - Be visible after scrolling past hero
   - Be hidden again when contact form comes into view
   - Be visible again if scrolling back up past contact form

WHY: Avoid redundant CTA when user is already at the contact form. Research Pitfall 2 flagged sticky CTA potentially covering content.
  </action>
  <verify>
Test on mobile viewport (375px):
1. Scroll from top - sticky bar appears after hero
2. Continue scrolling to contact form - sticky bar hides when form ~30% visible
3. Scroll back up - sticky bar reappears
4. Scroll back to top - sticky bar hides
  </verify>
  <done>Sticky CTA bar intelligently hides when contact form is visible.</done>
</task>

<task type="auto">
  <name>Task 2: Audit and fix tap target gaps</name>
  <files>C:/Users/bskim/Downloads/beamacademy-index.html</files>
  <action>
Review all interactive elements and ensure 44px minimum tap targets with adequate spacing.

1. Add missing elements to the global touch target rule (around line 281). Add these selectors if not present:
   - .tier-cta, .course-btn, .social-link
   - .footer-link a, .section-cta

2. Add touch target spacing rule to ensure adequate gaps between adjacent targets on touch devices:
   - Target containers: .hero-buttons, .sticky-cta-container, .social-links, .footer-links
   - Set gap: 12px minimum

3. Verify the form inputs have adequate spacing:
   - .form-group margin-bottom should be at least 16px
   - .form-row gap should be at least 16px

WHY: Research Pitfall 3 flagged touch target collision. 44px size + 12px gap = no mis-taps.
  </action>
  <verify>
Using browser DevTools mobile simulation:
- All buttons, links, and interactive elements show 44x44px minimum bounding box
- No adjacent touch targets are closer than 8px (ideally 12px)
- Form fields have clear separation
  </verify>
  <done>All tap targets meet 44x44px minimum with adequate spacing.</done>
</task>

<task type="auto">
  <name>Task 3: Verify color contrast ratios</name>
  <files>C:/Users/bskim/Downloads/beamacademy-index.html</files>
  <action>
Audit text colors against backgrounds for WCAG AA compliance (4.5:1 ratio).

1. Check gray text colors against white background:
   - gray-500 (#71717a) on white = 4.6:1 (passes)
   - gray-400 (#a1a1aa) on white = 3.0:1 (FAILS)
   
2. If any text uses gray-400, update to gray-500 or darker.

3. Check purple text on white:
   - purple-700 (#7c3aed) on white = 4.6:1 (passes)
   - purple-600 (#9333ea) on white = 3.8:1 (FAILS for body text)
   
4. For any purple-600 body text, update to purple-700.

5. Add a CSS comment documenting the contrast verification.

WHY: MOB-04 requires 4.5:1 contrast ratio. Gray-400 is a common accessibility failure.
  </action>
  <verify>
Use browser DevTools accessibility audit or contrast checker:
- All body text (under 18px bold / 24px regular) meets 4.5:1 ratio
- Large text (18px+ bold or 24px+ regular) meets 3:1 ratio minimum
- No text fails contrast check
  </verify>
  <done>All text meets WCAG AA contrast requirements (4.5:1 for body text).</done>
</task>

</tasks>

<verification>
## Phase Verification

After completing tasks:

1. **Sticky CTA Behavior:** Bar shows after hero, hides near contact, reappears on scroll up
2. **Tap Targets:** All interactive elements are 44x44px minimum
3. **Touch Spacing:** Adjacent targets have 12px+ gap on touch devices
4. **Contrast:** No text fails 4.5:1 contrast check
5. **Forms:** 16px font-size maintained (no iOS zoom)
</verification>

<success_criteria>
- [ ] Sticky CTA hides when contact form is 30%+ visible
- [ ] Sticky CTA reappears when scrolling away from contact
- [ ] All interactive elements meet 44x44px minimum
- [ ] No adjacent tap targets closer than 8px
- [ ] All body text meets 4.5:1 contrast ratio
- [ ] Form inputs maintain 16px font-size
</success_criteria>

<output>
After completion, create .planning/phases/22-layout-mobile-conversion/22-02-SUMMARY.md
</output>
