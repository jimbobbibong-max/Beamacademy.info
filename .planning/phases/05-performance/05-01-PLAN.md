---
plan: 05-01
title: Image Dimension Fixes and LCP Optimization
phase: 05-performance
wave: 1
depends_on: []
files_modified:
  - index.html
autonomous: true
must_haves:
  truths:
    - "All images have explicit width and height attributes"
    - "Hero image has fetchpriority=high and is preloaded"
    - "Page does not shift layout during image load"
    - "Lighthouse mobile LCP is under 2.5 seconds on simulated 4G"
    - "Lighthouse reports 0 render-blocking resources"
  artifacts:
    - path: "index.html"
      provides: "Image dimension attributes, preload hint, fetchpriority"
      contains: "width="
  key_links:
    - from: "<head>"
      to: "images/classroom-teaching.jpg"
      via: "preload link"
      pattern: 'rel="preload".*classroom-teaching'
---

# 05-01: Image Dimension Fixes and LCP Optimization

## Goal

Add explicit dimensions to all images to prevent CLS, and optimize the hero image (LCP element) with preload and fetchpriority to achieve LCP under 2.5s on 4G.

## Context

@.planning/phases/05-performance/05-RESEARCH.md

**Current state:**
- 8 images total, none have width/height attributes (causes CLS)
- Hero image (classroom-teaching.jpg) has `loading="eager"` but no fetchpriority
- No preload hint for LCP image
- Google Fonts already have preconnect (good)

**Images to update:**
| Image | Location | Current | Needed |
|-------|----------|---------|--------|
| classroom-teaching.jpg | Hero | eager, no dimensions | eager, fetchpriority=high, dimensions |
| classroom-students.jpg | About | lazy, no dimensions | lazy, dimensions |
| chris.jpg | Team | lazy, no dimensions | lazy, dimensions |
| nathan.jpg | Team | lazy, no dimensions | lazy, dimensions |
| taehoon.jpg | Team | lazy, no dimensions | lazy, dimensions |
| john.jpg | Team | lazy, no dimensions | lazy, dimensions |
| logo-star.png | Nav, Footer | no lazy, no dimensions | dimensions only |

## Tasks

<task id="1">
<description>
Get exact dimensions for all images using file inspection, then add width and height attributes to every img element in index.html.

Steps:
1. Run `magick identify` or use file properties to get exact pixel dimensions for each image
2. Add width="X" height="Y" attributes to each img tag
3. Images already have `max-width: 100%; height: auto;` in CSS so responsive behavior is preserved

Do NOT change loading attributes - they are already correct.
</description>
<acceptance>
All 8 img tags in index.html have width and height attributes matching their actual image dimensions.
</acceptance>
</task>

<task id="2" depends_on="1">
<description>
Add preload hint and fetchpriority for the LCP image (hero image).

Steps:
1. Add preload link in head section (after existing preconnects):
   `<link rel="preload" as="image" href="images/classroom-teaching.jpg">`
2. Add fetchpriority="high" to the hero img tag:
   `<img src="images/classroom-teaching.jpg" ... fetchpriority="high">`

Do NOT add preload for any other images - only the LCP image.
</description>
<acceptance>
- `<link rel="preload" as="image" href="images/classroom-teaching.jpg">` exists in head
- Hero img tag has fetchpriority="high" attribute
</acceptance>
</task>

<task id="3" depends_on="2">
<description>
Add preconnect hint for Google Tag Manager (already loading gtag script).

In head section, before font preconnects, add:
`<link rel="preconnect" href="https://www.googletagmanager.com">`

This reduces connection setup time for the analytics script.
</description>
<acceptance>
preconnect link for googletagmanager.com exists in head section.
</acceptance>
</task>

## Verification

After implementation, run these checks:

1. **Dimension check:** Search for `<img` in index.html - all should have `width=` and `height=`
2. **Preload check:** Search for `rel="preload"` - should find classroom-teaching.jpg
3. **Fetchpriority check:** Search for `fetchpriority="high"` - should find hero image
4. **Visual test:** Load page in browser, images should not cause layout shifts
5. **Lighthouse audit:** Run mobile audit, check CLS score (target < 0.1)
6. **Render-blocking check:** Run Lighthouse mobile audit and confirm "Eliminate render-blocking resources" opportunity shows 0 items or does not appear (PERF-03 verification)
7. **LCP check:** Run Lighthouse mobile audit and confirm LCP is under 2.5 seconds

## Success Criteria

- [ ] All 8 img elements have explicit width and height attributes
- [ ] Hero image has `fetchpriority="high"` attribute
- [ ] Preload hint exists for hero image in head section
- [ ] Preconnect hint exists for googletagmanager.com
- [ ] Page visually loads without layout shift on mobile viewport
- [ ] Lighthouse reports 0 render-blocking resources
- [ ] Lighthouse mobile LCP is under 2.5 seconds

## must_haves

Derived from phase goal "Page loads fast and displays stable layout on mobile":

- [ ] LCP image (classroom-teaching.jpg) is preloaded and has fetchpriority="high"
- [ ] All img elements have width/height attributes for aspect ratio calculation
- [ ] CLS prevention: browser can reserve space before images load
- [ ] Lighthouse mobile LCP under 2.5 seconds on simulated 4G
- [ ] No render-blocking resources reported by Lighthouse
