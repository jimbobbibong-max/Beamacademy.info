---
phase: 05-performance
plan: 03
type: execute
wave: 1
depends_on: []
files_modified: [index.html]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "No JavaScript console errors on page load"
    - "Sticky CTA bar is accessible (no aria-hidden violation)"
  artifacts:
    - path: "index.html"
      provides: "Fixed JS syntax, accessible sticky bar"
      contains: "!isClickInside"
  key_links:
    - from: "sticky-cta-bar"
      to: "focusable links"
      via: "no aria-hidden on initial state"
      pattern: 'class="sticky-cta-bar"[^>]*>'
---

<objective>
Fix JavaScript syntax error and accessibility violation in sticky CTA bar

Purpose: Resolve console errors and Lighthouse accessibility warnings that were discovered during UAT
Output: Clean console, accessible sticky CTA bar
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@C:/Users/bskim/beamacademy-site/.planning/PROJECT.md
@C:/Users/bskim/beamacademy-site/.planning/phases/05-performance/05-UAT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix JavaScript syntax error on line 5801</name>
  <files>C:/Users/bskim/beamacademy-site/index.html</files>
  <action>
  On line 5801 (approximately), there is an escaped backslash before the exclamation mark:

  ```javascript
  if (\!isClickInside && mobileNav.classList.contains('active')) {
  ```

  Change `\!` to just `!`:

  ```javascript
  if (!isClickInside && mobileNav.classList.contains('active')) {
  ```

  This is a standard JavaScript logical NOT operator. The backslash is invalid syntax.
  </action>
  <verify>
  1. Open browser console (F12 > Console)
  2. Hard refresh the page (Ctrl+Shift+R)
  3. Console should show no SyntaxError
  </verify>
  <done>No JavaScript syntax errors in console on page load</done>
</task>

<task type="auto">
  <name>Task 2: Fix aria-hidden accessibility violation on sticky CTA bar</name>
  <files>C:/Users/bskim/beamacademy-site/index.html</files>
  <action>
  The sticky CTA bar at approximately line 5627 has `aria-hidden="true"` but contains focusable links.
  This violates WCAG - focusable elements should not be inside aria-hidden containers.

  Current (problematic):
  ```html
  <div class="sticky-cta-bar" id="sticky-cta-bar" aria-hidden="true">
  ```

  Fix: Remove `aria-hidden="true"` from the static HTML. The bar is visually hidden via CSS
  (transform: translateY(100%)) until JavaScript adds the "visible" class.

  Change to:
  ```html
  <div class="sticky-cta-bar" id="sticky-cta-bar">
  ```

  Then in the JavaScript (around line 5916), update the IntersectionObserver callback.
  Currently it sets aria-hidden dynamically. Change it to use the `inert` attribute instead,
  which properly removes elements from the accessibility tree AND prevents interaction:

  Current JS:
  ```javascript
  stickyBar.setAttribute('aria-hidden', !isVisible);
  ```

  Change to:
  ```javascript
  stickyBar.inert = !isVisible;
  ```

  The `inert` attribute is better because:
  1. It makes the element AND all descendants non-interactive
  2. It removes them from the accessibility tree
  3. It's the semantic way to hide interactive content
  </action>
  <verify>
  1. Run Lighthouse accessibility audit
  2. Check for "ARIA hidden element" violations - should be none for sticky-cta-bar
  3. Verify sticky bar still appears/disappears on scroll
  </verify>
  <done>Sticky CTA bar has no aria-hidden violation, uses inert attribute for hidden state</done>
</task>

</tasks>

<verification>
1. Browser console shows no JavaScript errors on page load
2. Lighthouse accessibility audit shows no aria-hidden violations for sticky CTA
3. Sticky CTA bar functionality unchanged (appears on scroll, links work)
</verification>

<success_criteria>
- Console error "SyntaxError: Invalid or unexpected token" is resolved
- Accessibility violation "focusable element inside aria-hidden" is resolved
- Page functionality unchanged
</success_criteria>

<output>
After completion, create `.planning/phases/05-performance/05-03-SUMMARY.md`
</output>
