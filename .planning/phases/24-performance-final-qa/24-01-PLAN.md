---
phase: 24-performance-final-qa
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/phases/24-performance-final-qa/24-01-AUDIT-RESULTS.md
autonomous: false

must_haves:
  truths:
    - "LCP is measured and documented (target: ≤1.0s)"
    - "CLS is measured and documented (target: ≤0.1)"
    - "No render-blocking resources flagged by Lighthouse"
    - "Animation performance verified (no layout thrashing)"
  artifacts:
    - path: ".planning/phases/24-performance-final-qa/24-01-AUDIT-RESULTS.md"
      provides: "Lighthouse audit results documentation"
      contains: "LCP"
  key_links:
    - from: "Lighthouse CLI"
      to: "beamacademy.com.au"
      via: "Desktop and mobile presets"
      pattern: "lighthouse.*beamacademy"
---

<objective>
Run Lighthouse CLI audits on beamacademy.com.au to verify Core Web Vitals (LCP, CLS, FID/INP) and performance scores after v7 redesign.

Purpose: Confirm that Phases 20-23 (payment fix, design system, layout, motion) did not introduce performance regressions
Output: Documented audit results with pass/fail status for each PERF requirement
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/24-performance-final-qa/24-RESEARCH.md

Performance targets from REQUIREMENTS.md:
- PERF-01: LCP ≤1.0s (baseline 0.9s)
- PERF-02: CLS ≤0.1 (baseline 0.014)
- PERF-03: No render-blocking resources added
- PERF-04: All animations use transform/opacity only

Key research findings:
- Run Lighthouse CLI with --preset=desktop and --preset=mobile
- Run 3 times minimum for score variance
- Check Performance panel for layout thrashing during animations
- LCP element should be hero headline/image (opacity:0.01 fix from Phase 23)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run Lighthouse Desktop Audit</name>
  <files>.planning/phases/24-performance-final-qa/24-01-AUDIT-RESULTS.md</files>
  <action>
Run Lighthouse CLI audit on https://beamacademy.com.au with desktop preset.

Execute 3 times to account for variance and take median scores:

```bash
lighthouse https://beamacademy.com.au --preset=desktop --only-categories=performance,accessibility,best-practices --output=json --output-path=./lighthouse-run-1.json --chrome-flags="--headless"
lighthouse https://beamacademy.com.au --preset=desktop --only-categories=performance,accessibility,best-practices --output=json --output-path=./lighthouse-run-2.json --chrome-flags="--headless"
lighthouse https://beamacademy.com.au --preset=desktop --only-categories=performance,accessibility,best-practices --output=json --output-path=./lighthouse-run-3.json --chrome-flags="--headless"
```

Extract and record from each run:
- Performance score
- LCP value (milliseconds)
- CLS value
- FID/INP value
- Accessibility score
- Best Practices score
- LCP element identified
- Render-blocking resources (if any)

Calculate median for each metric across 3 runs.

Document results in 24-01-AUDIT-RESULTS.md under "## Desktop Audit Results"
  </action>
  <verify>
- 3 Lighthouse runs completed
- Results documented with median values
- LCP element identified (should be hero content)
  </verify>
  <done>Desktop Lighthouse audit complete with median scores documented</done>
</task>

<task type="auto">
  <name>Task 2: Run Lighthouse Mobile Audit</name>
  <files>.planning/phases/24-performance-final-qa/24-01-AUDIT-RESULTS.md</files>
  <action>
Run Lighthouse CLI audit on https://beamacademy.com.au with mobile preset.

Execute 3 times:

```bash
lighthouse https://beamacademy.com.au --preset=mobile --only-categories=performance,accessibility,best-practices --output=json --output-path=./lighthouse-mobile-run-1.json --chrome-flags="--headless"
lighthouse https://beamacademy.com.au --preset=mobile --only-categories=performance,accessibility,best-practices --output=json --output-path=./lighthouse-mobile-run-2.json --chrome-flags="--headless"
lighthouse https://beamacademy.com.au --preset=mobile --only-categories=performance,accessibility,best-practices --output=json --output-path=./lighthouse-mobile-run-3.json --chrome-flags="--headless"
```

Mobile has stricter thresholds due to simulated slow 4G throttling:
- Mobile LCP green: ≤2.5s (vs desktop ≤1.2s)
- Mobile FCP green: ≤1.8s

Document results in 24-01-AUDIT-RESULTS.md under "## Mobile Audit Results"
  </action>
  <verify>
- 3 mobile Lighthouse runs completed
- Results documented with median values
- Mobile-specific metrics recorded
  </verify>
  <done>Mobile Lighthouse audit complete with median scores documented</done>
</task>

<task type="auto">
  <name>Task 3: Verify Animation Performance (PERF-04)</name>
  <files>.planning/phases/24-performance-final-qa/24-01-AUDIT-RESULTS.md</files>
  <action>
Verify that Phase 23 animations use only transform/opacity (no layout thrashing).

1. Review the CSS in beamacademy-index.html for animation properties.

2. Search for animations that might cause layout thrashing:
   - Animations on width, height
   - Animations on top, left, right, bottom
   - Animations on margin, padding
   - Animations on font-size

3. Confirm safe properties are used:
   - transform (translate, scale, rotate)
   - opacity
   - filter (if any)

4. Document findings in 24-01-AUDIT-RESULTS.md under "## Animation Performance Analysis"

Expected animations from Phase 23:
- Page load: @starting-style with opacity/transform
- Scroll reveals: IntersectionObserver triggering opacity/transform
- Hover states: translateY, scale transforms
- Button active: scale(0.98) transform

Any animation using layout properties is a BLOCKER and must be fixed.
  </action>
  <verify>
- All animation CSS reviewed
- No layout-thrashing properties found in animations
- Safe properties documented
  </verify>
  <done>Animation performance verified - all animations use transform/opacity only</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Lighthouse audit results for desktop and mobile, animation performance verification</what-built>
  <how-to-verify>
Review the audit results documented in .planning/phases/24-performance-final-qa/24-01-AUDIT-RESULTS.md

Check pass/fail status for each requirement:
- PERF-01: LCP ≤1.0s on desktop (≤2.5s on mobile)
- PERF-02: CLS ≤0.1
- PERF-03: No render-blocking resources
- PERF-04: Animations use transform/opacity only

If any BLOCKER found (performance score below 70, critical metrics failing), we'll create fix tasks before proceeding.
  </how-to-verify>
  <resume-signal>Type "approved" if results acceptable, or describe issues needing resolution</resume-signal>
</task>

</tasks>

<verification>
- [ ] Desktop Lighthouse audit completed (3 runs, median calculated)
- [ ] Mobile Lighthouse audit completed (3 runs, median calculated)
- [ ] LCP documented and compared to 1.0s threshold
- [ ] CLS documented and compared to 0.1 threshold
- [ ] Render-blocking resources check documented
- [ ] Animation CSS reviewed for layout thrashing
- [ ] Results documented in 24-01-AUDIT-RESULTS.md
- [ ] User reviewed and approved results
</verification>

<success_criteria>
Phase 24 Plan 01 complete when:
1. Desktop and mobile Lighthouse audits run and documented
2. All PERF requirements verified (pass or fail with rationale)
3. Animation performance confirmed (no layout thrashing)
4. User has reviewed and approved the audit results
</success_criteria>

<output>
After completion, create `.planning/phases/24-performance-final-qa/24-01-SUMMARY.md` using summary template.
</output>
